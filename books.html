<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
  <title>Форматы книги</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    html, body {
      height: auto;
      min-height: unset !important;
      background: #0f0f0f;
      overflow: hidden;
    }
    body {
      font-family: system-ui, -apple-system, sans-serif;
      color: #ddd;
      padding: 12px 10px 16px;
      font-size: 13px;
      line-height: 1.3;
      touch-action: manipulation;
    }
    .container {
      max-width: 720px;
      margin: 0 auto;
      height: fit-content;
    }
    h1 {
      color: #ffd197;
      font-size: 1.3rem;
      text-align: center;
      margin-bottom: 6px;
    }
    .subtitle {
      color: #888;
      text-align: center;
      font-size: 0.82rem;
      margin-bottom: 48px;
      line-height: 1.2;
    }
    .formats {
      display: grid;
      grid-template-columns: 1fr;
      gap: 10px;
    }
    .card {
      background: #181818;
      border: 1px solid #2a2a2a;
      border-radius: 8px;
      padding: 12px 10px;
      text-align: center;
    }
    .icon {
      font-size: 1.6rem;
      color: #999;
      margin-bottom: 6px;
    }
    .card h3 {
      color: #eee;
      font-size: 1rem;
      margin-bottom: 4px;
    }
    .card p {
      color: #999;
      font-size: 0.78rem;
      margin-bottom: 8px;
      line-height: 1.2;
    }
    .btn {
      display: block;
      padding: 8px 0;
      background: #ffd197;
      color: #111;
      text-decoration: none;
      border-radius: 6px;
      font-size: 0.88rem;
      font-weight: 500;
      cursor: pointer;
      border: none;
      width: 100%;
    }
    .btn:hover {
      background: #e0c58a;
    }
    .note {
      text-align: center;
      color: #777;
      font-size: 0.76rem;
      margin-top: 12px;
      opacity: 0.9;
    }
    @media (max-width: 380px) {
      body {
        padding: 10px 8px 14px;
        font-size: 12.5px;
      }
      h1 { font-size: 1.2rem; }
      .subtitle { font-size: 0.78rem; margin-bottom: 48px; }
      .card { padding: 14px 8px; }
      .icon { font-size: 1.5rem; margin-bottom: 4px; }
      .card h3 { font-size: 0.95rem; }
      .card p { font-size: 0.74rem; margin-bottom: 6px; }
      .btn { padding: 7px 0; font-size: 0.84rem; }
      .note { font-size: 0.72rem; margin-top: 10px; }
    }
  </style>
</head>
<body>

<div class="container">
  <h1>Скачать книгу</h1>
  <div class="subtitle">«Будь джедаем» — скачивай в удобном формате!</div>

  <div class="formats">
    <div class="card">
      <i class="fas fa-file icon"></i>
      <h3>EPUB</h3>
      <p>Apple, Google Play, читалки</p>
      <button class="btn" onclick="dl('epub')">Скачать</button>
    </div>

    <div class="card">
      <i class="fas fa-file icon"></i>
      <h3>FB2</h3>
      <p>PocketBook, Onyx, Android</p>
      <button class="btn" onclick="dl('fb2')">Скачать</button>
    </div>

    <div class="card">
      <i class="fas fa-file-pdf icon"></i>
      <h3>PDF</h3>
      <p>Универсальный формат</p>
      <button class="btn" onclick="dl('pdf')">Скачать</button>
    </div>
  </div>

  <div class="note">Без DRM • Поддержка автора</div>
</div>

<script>
// Ник скрыт в base64-частях — ничего не видно в исходном коде страницы
function dl(fmt) {
  // Разбитые части: https://raw.githubusercontent.com/deenque/audio/main/Kodeks_Cheloveka.*
  const parts = [
    'aHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29t',  // https://raw.githubusercontent.com
    'L2RlZW5xdWUvYXVkaW8vbWFpbi9Lb2Rla3Nf',          // /deenque/audio/main/Kodeks_
    'Q2hlbG92ZWth',                                     // Cheloveka
    fmt === 'epub' ? 'LmVwdWI=' :                       // .epub
    fmt === 'fb2'  ? 'LmZiMg=='  :                      // .fb2
                     'LnBkZg=='                         // .pdf
  ];

  let url;
  try {
    url = atob(parts.join(''));
  } catch (e) {
    alert('Ошибка при подготовке ссылки');
    return;
  }

  // Создаём временную ссылку и запускаем скачивание
  const a = document.createElement('a');
  a.href = url;
  a.download = 'Kodeks_Cheloveka.' + fmt;
  a.style.display = 'none';
  document.body.appendChild(a);
  a.click();
  document.body.removeChild(a);
}
</script>

</body>
</html>
